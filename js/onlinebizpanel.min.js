var onlineBizPanel=function(e,a){function l(a){var n=i.attr("data-status");e(".bottom-wrap, .top-wrap").remove(),"accordion"===n?p():"back"===n&&(i.find("i").removeClass("ob-hide"),c(t))}function d(a){a.preventDefault();var n=e(this).attr("data-businessname"),t=ajaxManager.search("businessName",n);i.find("i").addClass("ob-hide"),r(t,c.bind(null,s))}function c(e){var a="#ob-full-details"===e.selector?t:s,n="#ob-full-details"===e.selector?"back":"accordion",o="#ob-full-details"===e.selector?"Back":"Online Businesses";"#ob-full-details"===e.selector?e:t;i.attr("data-status",n).find("h2").text(o),a.addClass("ob-hide"),a.toggleClass("ob-fadeOut ob-fadeIn"),e.removeClass("ob-hide"),e.outerHeight(),e.toggleClass("ob-fadeOut ob-fadeIn")}function r(n,t){var i,o=a.createDocumentFragment(),l=u("div",{"class":"top-wrap clearfix"}),d=u("div",{"class":"bottom-wrap"}),c=u("h2"),r=u("a",{"class":"ob-phone",href:"tel:"+n.phone}),p=u("a",{href:n.website,target:"_blank"}),f=u("p"),b=u("hr"),g=n.logo?u("img",{src:n.logo,alt:"business logo"}):void 0,h=n.mainimage?u("img",{src:n.mainimage,alt:"main image"}):void 0;g?e(l).append(g,c,r):e(l).append(c,r),e(c).append(n.businessName),e(r).append(n.phone),e(o).append(l),h?e(d).append(f,p,b,h):e(d).append(f,p),e(f).append(n.details),e(p).append(n.website),e(o).append(d),s.append(o),i=g?g:h,i?e(i).load(t):t()}function p(){n.toggleClass("ob-expanded ob-collapse"),t.toggleClass("ob-fadeOut ob-fadeIn"),i.find("i").toggleClass("chevicon-chev-up chevicon-chev-down")}function u(e,n){var t=a.createElement(e);return n&&Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),t}function f(n){var i=a.createDocumentFragment();n.forEach(function(a){var n=u("li"),t=u("a",{"class":"ob-details",href:"#","data-businessname":a.businessName}),s=u("p"),o=u("div",{"class":"ob-phone"}),l=u("a",{href:a.website,target:"_blank"}),d=u("h2");e(n).append(t,o,l),e(d).append(a.businessName),e(s).append(a.details),e(t).append(d,s),e(o).append(a.phone),e(l).append(a.website),e(i).append(n)}),t.append(i)}var n,t,i,s,o={};return o.collapse=function(){n.hasClass("ob-expanded")&&p()},o.expand=function(){n.hasClass("ob-collapse")&&p()},o.init=function(a){n=e(a.listContainer),t=e(a.listInnerContainer),i=e(a.toggleElement),s=e(a.fullDetails),ajaxManager.loadData(f),i.bind("click",l),t.on("click",'a[class^="ob-details"]',d)},o}(jQuery,document);$(document).ready(function(){onlineBizPanel.init({listContainer:"#online-list-containter",listInnerContainer:"#online-list-containter ul",toggleElement:"#online-biz-toggle",fullDetails:"#ob-full-details"})});