var onlineBizPanel=function(e,a){function d(){n.toggleClass("ob-expanded ob-collapse"),t.toggleClass("ob-fadeOut ob-fadeIn"),i.find("i").toggleClass("rotate-up")}function r(e,a){var n=e?t:o;n.addClass("ob-hide"),n.toggleClass("ob-fadeOut ob-fadeIn"),a.removeClass("ob-hide"),a.outerHeight(),a.toggleClass("ob-fadeOut ob-fadeIn")}function p(e,n){var t=a.createElement(e);return n&&Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),t}function c(e){d()}function u(a){r(!1,t),e("#back-button").addClass("ob-hide"),e(".bottom-wrap, .top-wrap").remove()}function f(a){a.preventDefault();var n=e(this).attr("data-businessname"),t=ajaxManager.search("businessName",n),i=r.bind(null,!0,o);e("#back-button").removeClass("ob-hide"),b(t,i)}function b(n,t){var i,s=a.createDocumentFragment(),l=p("div",{"class":"top-wrap clearfix"}),d=p("div",{"class":"bottom-wrap"}),r=p("h2"),c=p("a",{"class":"ob-phone",href:"tel:"+n.phone}),u=p("a",{href:n.website,target:"_blank"}),f=p("p"),b=p("hr"),g=n.logo?p("img",{src:n.logo,alt:"business logo"}):void 0,m=n.mainimage?p("img",{src:n.mainimage,alt:"main image"}):void 0;g?e(l).append(g):g,e(l).append(r),e(l).append(c),e(r).append(n.businessName),e(c).append(n.phone),e(s).append(l),e(d).append(f),e(d).append(u),m?e(d).append(b,m):m,e(f).append(n.details),e(u).append(n.website),e(s).append(d),o.append(s),i=g?g:m,i?e(i).load(t):t()}function g(n){var i=a.createDocumentFragment();n.forEach(function(a){var n=p("li"),t=p("a",{"class":"ob-details",href:"#","data-businessname":a.businessName}),o=p("p"),s=p("div",{"class":"ob-phone"}),l=p("a",{href:a.website,target:"_blank"}),d=p("h2");e(n).append(t,s,l),e(d).append(a.businessName),e(o).append(a.details),e(t).append(d,o),e(s).append(a.phone),e(l).append(a.website),e(i).append(n)}),t.append(i)}function m(e){var a=e.target.scrollTop;a>=6&&l&&(i.addClass("drop-shadow"),l=!1),5>=a&&(i.removeClass("drop-shadow"),l=!0)}var n,t,i,o,s={},l=!0;return s.collapse=function(){n.hasClass("ob-expanded")&&d()},s.expand=function(){n.hasClass("ob-collapse")&&d()},s.init=function(a){n=e(a.listContainer),t=e(a.listInnerContainer),i=e(a.toggleElement),o=e(a.fullDetails),ajaxManager.loadData(g),i.bind("click",c),t.on("click",'a[class^="ob-details"]',f),n.on("scroll",m),e("#back-button").bind("click",u),e("#loadbutton").bind("click",function(e){e.preventDefault(),ajaxManager.loadMore(5,g)})},s}(jQuery,document);$(document).ready(function(){onlineBizPanel.init({listContainer:"#online-list-containter",listInnerContainer:"#online-list-containter ul",toggleElement:"#online-biz-toggle",fullDetails:"#ob-full-details"})});