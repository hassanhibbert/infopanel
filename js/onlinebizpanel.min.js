var onlineBizPanel=function(e,n){function l(n){var a=o.attr("data-status");e(".bottom-wrap, .top-wrap").remove(),"accordion"===a?f():"back"===a&&d(t)}function r(n){n.preventDefault();var a=e(this).attr("data-businessname"),t=ajaxManager.search("businessName",a);u(t,d.bind(null,i))}function c(){"#ob-full-details"===$element.selector?t:i,"#ob-full-details"===$element.selector?"back":"accordion","#ob-full-details"===$element.selector?"Back":"Online Businesses","#ob-full-details"===$element.selector?$element:t}function d(e){c(),o.attr("data-status",status).find("h2").text(toggleText),$hideElement.addClass("ob-hide"),$hideElement.toggleClass("ob-fadeOut ob-fadeIn"),e.removeClass("ob-hide"),e.outerHeight(),e.toggleClass("ob-fadeOut ob-fadeIn")}function u(a,t){var o,s=n.createDocumentFragment(),l=p("div",{"class":"top-wrap clearfix"}),r=p("div",{"class":"bottom-wrap"}),c=p("h2"),d=p("a",{"class":"ob-phone",href:"tel:"+a.phone}),u=p("a",{href:a.website,target:"_blank"}),f=p("p"),b=p("hr"),g=a.logo?p("img",{src:a.logo,alt:"business logo"}):void 0,h=a.mainimage?p("img",{src:a.mainimage,alt:"main image"}):void 0;g?e(l).append(g,c,d):e(l).append(c,d),e(c).append(a.businessName),e(d).append(a.phone),e(s).append(l),h?e(r).append(f,u,b,h):e(r).append(f,u),e(f).append(a.details),e(u).append(a.website),e(s).append(r),i.append(s),o=g?g:h,o?e(o).load(t):t()}function f(){a.toggleClass("ob-expanded ob-collapse"),t.toggleClass("ob-fadeOut ob-fadeIn"),o.find("i").toggleClass("chevicon-chev-up chevicon-chev-down")}function p(e,a){var t=n.createElement(e);return a&&Object.keys(a).forEach(function(e){t.setAttribute(e,a[e])}),t}function b(a){var o=n.createDocumentFragment();a.forEach(function(n){var a=p("li"),t=p("a",{"class":"ob-details",href:"#","data-businessname":n.businessName}),i=p("p"),s=p("div",{"class":"ob-phone"}),l=p("a",{href:n.website,target:"_blank"}),r=p("h2");e(a).append(t,s,l),e(r).append(n.businessName),e(i).append(n.details),e(t).append(r,i),e(s).append(n.phone),e(l).append(n.website),e(o).append(a)}),t.append(o)}var a,t,o,i,s={};return s.collapse=function(){a.hasClass("ob-expanded")&&f()},s.expand=function(){a.hasClass("ob-collapse")&&f()},s.init=function(n){a=e(n.listContainer),t=e(n.listInnerContainer),o=e(n.toggleElement),i=e(n.fullDetails),ajaxManager.loadData(b),o.bind("click",l),t.on("click",'a[class^="ob-details"]',r)},s}(jQuery,document);$(document).ready(function(){onlineBizPanel.init({listContainer:"#online-list-containter",listInnerContainer:"#online-list-containter ul",toggleElement:"#online-biz-toggle",fullDetails:"#ob-full-details"})});